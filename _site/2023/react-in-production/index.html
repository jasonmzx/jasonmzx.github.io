








<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>jasonmzx | Jason Manarroo | React In Production </title>
    <link rel="shortcut icon" type="image/png" href="/favicon.png" >
    <meta name="theme-color" content="#222222"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/assets/css/fa-svg.css" rel="stylesheet">
    <link href="/assets/css/bootstrap4.min.css" rel="stylesheet">
    <link href="/assets/css/theme.css" rel="stylesheet">
    <link href="/assets/css/syntax.css" rel="stylesheet">
 </head>

<body>

<nav class="navbar navbar-expand-sm navbar-dark">
    <div class="navbar-collapse" style="display: block;">
        <div style="margin-bottom: 1vh; padding-left: 3vw;">
        <a class="navbar-brand " href="/">
            <!-- <img class="navbar-img" src="/favicon.png"> -->
            jasonmzx | Jason Manarroo
        </a>
        <br>
        <span style="color:#2AAA8A; font-weight: 600;">Software Engineering Student</span>
    </div>

        <div class="navbar-nav" style="flex-wrap: wrap;">

            <a class="nav-item nav-link" href="/">
                
                <svg xmlns="http://www.w3.org/2000/svg" height="19px" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0M3.124 7.5A8.969 8.969 0 015.292 3m13.416 0a8.969 8.969 0 012.168 4.5" />
                  </svg>
                  

            Home</a>

            <a class="nav-item nav-link" href="/recent/">
                
                <svg xmlns="http://www.w3.org/2000/svg" height="19px"fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10" />
                </svg>

            Recent</a>

            <a class="nav-item nav-link" href="/archive">

            <svg xmlns="http://www.w3.org/2000/svg" height="19px" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125" />
                  </svg>
                  

            Archive</a>

            <a class="nav-item nav-link" href="/tags">
            
            <svg xmlns="http://www.w3.org/2000/svg" height="19px"  fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 6h.008v.008H6V6z" />
                  </svg>
                  

            Tags</a>
            <a class="nav-item nav-link" href="/projects">
                <svg xmlns="http://www.w3.org/2000/svg" height="19px"  fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M17.25 6.75L22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3l-4.5 16.5" />
                  </svg>

            Projects</a>
        </div>
    </div>
</nav>


    <div class="wrapper">
      <div class="content">
        <div class="special_container">
          <div class="row">
            <div class="col-md-9">
              <div class="card" style="margin-left: 2.5vw;">
                <h1 id="react-in-production">React In Production</h1>

<p>When it’s time to move your app to production, having multiple JavaScript or CSS files isn’t ideal. When a user visits your site, each of your files will require an <em>additional</em> HTTP request, ~making your site slower to load.~ So to remedy this, you can create a <strong>“build”</strong> of our app, which merges all your CSS files into one file, and does the same with your JavaScript. This way, you minimize the number and size of files the user gets. To create this <strong>“build”</strong>, you use a <strong>“build tool”</strong>. Hence the use of <code class="language-plaintext highlighter-rouge">npm run build</code>.</p>

<p>After you run npm run build your build directory will be:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>build/
  static/
    css/
      main.css
    js/
      main.js
</code></pre></div></div>

<p>(Right now, with <code class="language-plaintext highlighter-rouge">npm start</code>, the <strong>React Components</strong> are visible, not minified &amp; combined like a build)</p>

<p><a href="https://stackoverflow.com/questions/43830866/what-is-npm-run-build-in-create-react-app">Quoted from StackOverflow</a></p>

<hr />

<p>From my understanding, you’re essentially <strong>serve</strong>ng a static version of your build <em>(A.K.A Webpack Bundle)</em></p>

<h3 id="what-is-webpack-what-does-it-do-for-react-build">What is Webpack, what does it do for React Build?</h3>
<p>Webpack simplifies the build process for React applications. It allows developers to manage dependencies and bundle files with ease. Webpack can also optimize code and assets for production, reducing the file size of the application and improving performance.<br />
<em>(Minification of JavaScript, HTML &amp; CSS… Making React.js Code More Obscured… Bundling of Website)</em></p>

<p>Serving a React Build: <em>(npm <strong><a href="https://www.npmjs.com/package/serve">Serve Library, by Vercel</a></strong> required)</em></p>

<p><code class="language-plaintext highlighter-rouge">npm install -g serve</code><br />
<code class="language-plaintext highlighter-rouge">serve -s build</code></p>

<p>Serving React Build on specific port: <em>(Auto default is port 3000)</em></p>

<p><code class="language-plaintext highlighter-rouge">serve -s build -l 4000</code></p>

<p><a href="https://create-react-app.dev/docs/deployment/">SRC: Create-React-App Deployment Docs</a></p>

<hr />

<h2 id="what-if-i-dont-want-to-use-serve-and-just-deploy-the-static-site-directly-to-nginx">What if I don’t want to use serve, and just deploy the Static Site directly to NGINX…</h2>

<p>Dockerfile for React.js Build, without serve</p>
<div class="language-Dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">FROM</span><span class="w"> </span><span class="s">node:16-alpine</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="s">builder</span>
<span class="c"># Set the working directory to /app inside the container</span>
<span class="k">WORKDIR</span><span class="s"> /app</span>
<span class="c"># Copy app files</span>
<span class="k">COPY</span><span class="s"> . .</span>
<span class="c"># Install dependencies (npm ci makes sure the exact versions in the lockfile gets installed)</span>
<span class="k">RUN </span>npm ci 
<span class="c"># Build the app</span>
<span class="k">RUN </span>npm run build

<span class="c"># Bundle static assets with nginx</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">nginx:1.21.0-alpine</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="s">production</span>
<span class="k">ENV</span><span class="s"> NODE_ENV production</span>
<span class="c"># Copy built assets from `builder` image</span>
<span class="k">COPY</span><span class="s"> --from=builder /app/build /usr/share/nginx/html</span>
<span class="c"># Add your nginx.conf</span>
<span class="k">COPY</span><span class="s"> nginx.conf /etc/nginx/conf.d/default.conf</span>
<span class="c"># Expose port</span>
<span class="k">EXPOSE</span><span class="s"> 80</span>
<span class="c"># Start nginx</span>
<span class="k">CMD</span><span class="s"> ["nginx", "-g", "daemon off;"]</span>
</code></pre></div></div>

<p>NGINX Setup, it will literally just be manually serving the “Static” HTML built by React Build &amp; the whole Web Pack?</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// nginx.conf

server <span class="o">{</span>
  listen 80<span class="p">;</span>

  location / <span class="o">{</span>
    root /usr/share/nginx/html/<span class="p">;</span>
    include /etc/nginx/mime.types<span class="p">;</span>
    try_files <span class="nv">$uri</span> <span class="nv">$uri</span>/ /index.html<span class="p">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>look into these jason</p>

<p>TODO: https://jsramblings.com/dockerizing-a-react-app/</p>

<p>TODO: Look into this link https://medium.com/bb-tutorials-and-thoughts/how-to-serve-react-application-with-nginx-and-docker-9c51ac2c50ba</p>


              </div>
            </div>
            <div class="col-md-3 hidden-xs">
              <div class="sidebar ">
  <h2>Latest Activity</h2>
  <ul>
    
    <li><a href="/2023/react-in-production/">React In Production</a></li>
    
    <li><a href="/2023/kick-tracker-init/">Punch & Kick Tracking using Camera</a></li>
    
    <li><a href="/2023/stratified-vs-random/">Stratified VS. Random Sampling</a></li>
    
    <li><a href="/2023/first-post/">First Post!</a></li>
    
  </ul>
</div>

<div class="sidebar">
  <h2>Tags</h2>
  <ul class="fa-ul">
    
    
    <li>
      
      
<span class="fa-li">
    <svg class="svg-inline--fa fa-tag fa-w-16" aria-hidden="true" 
        data-prefix="fas" data-icon="tag"
        role="img"
        xmlns="http://www.w3.org/2000/svg" 
        viewBox="0 0 512 512" 
        data-fa-i2svg="">
        <path fill="currentColor"
            d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z">
        </path>
    </svg>
</span>

      <!-- <span class="fa-li"><i class="fas fa-tag"></i></span> -->

            <a href="/tag/devops" data-toggle="tooltip" data-placement="right" title="1">
        <span>devops</span></a>
    </li>
    
    <li>
      
      
<span class="fa-li">
    <svg class="svg-inline--fa fa-tag fa-w-16" aria-hidden="true" 
        data-prefix="fas" data-icon="tag"
        role="img"
        xmlns="http://www.w3.org/2000/svg" 
        viewBox="0 0 512 512" 
        data-fa-i2svg="">
        <path fill="currentColor"
            d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z">
        </path>
    </svg>
</span>

      <!-- <span class="fa-li"><i class="fas fa-tag"></i></span> -->

            <a href="/tag/github" data-toggle="tooltip" data-placement="right" title="2">
        <span>github</span></a>
    </li>
    
    <li>
      
      
<span class="fa-li">
    <svg class="svg-inline--fa fa-tag fa-w-16" aria-hidden="true" 
        data-prefix="fas" data-icon="tag"
        role="img"
        xmlns="http://www.w3.org/2000/svg" 
        viewBox="0 0 512 512" 
        data-fa-i2svg="">
        <path fill="currentColor"
            d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z">
        </path>
    </svg>
</span>

      <!-- <span class="fa-li"><i class="fas fa-tag"></i></span> -->

            <a href="/tag/machine-learning" data-toggle="tooltip" data-placement="right" title="2">
        <span>machine-learning</span></a>
    </li>
    
    <li>
      
      
<span class="fa-li">
    <svg class="svg-inline--fa fa-tag fa-w-16" aria-hidden="true" 
        data-prefix="fas" data-icon="tag"
        role="img"
        xmlns="http://www.w3.org/2000/svg" 
        viewBox="0 0 512 512" 
        data-fa-i2svg="">
        <path fill="currentColor"
            d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z">
        </path>
    </svg>
</span>

      <!-- <span class="fa-li"><i class="fas fa-tag"></i></span> -->

            <a href="/tag/react.js" data-toggle="tooltip" data-placement="right" title="1">
        <span>react.js</span></a>
    </li>
    
  </ul>
</div>

            </div>
          </div>
        </div>
      </div>
      
    </div>
  </body>
</html>
